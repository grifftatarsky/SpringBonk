<h2 mat-dialog-title>Nominate Book</h2>

<mat-dialog-content>
  <div class="book-nominate-container">
    <div class="book-info">
      <div class="book-cover">
        <img [src]="data.book.imageURL" alt="Book cover" />
      </div>
      <div class="book-details">
        <h3>{{ data.book.title }}</h3>
        <p class="author">{{ data.book.author }}</p>
      </div>
    </div>

    <div *ngIf="loading" class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
      <span>Loading elections...</span>
    </div>

    <div *ngIf="!loading && elections.length === 0" class="no-elections">
      No ongoing elections available for nomination.
    </div>

    <ng-container *ngIf="!loading && elections.length > 0">
      <mat-form-field appearance="outline" class="election-select">
        <mat-label>Select an election</mat-label>
        <mat-select [formControl]="electionControl">
          <mat-option *ngFor="let election of elections" [value]="election.id">
            {{ election.title }}
            <span class="election-status">
              <mat-chip
                [ngClass]="getStatus(election.endDateTime).class"
                disableRipple>
                <mat-icon>{{ getStatus(election.endDateTime).icon }}</mat-icon>
                {{ getStatus(election.endDateTime).text }}
              </mat-chip>
            </span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="selectedElection" class="election-details">
        <p class="election-date">
          Ends: {{ selectedElection.endDateTime | date: 'medium' }}
        </p>
      </div>
    </ng-container>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancel</button>
  <button
    mat-raised-button
    color="primary"
    [disabled]="!electionControl.valid || loading || nominating"
    (click)="onNominate()">
    {{ nominating ? 'Nominating...' : 'Nominate' }}
  </button>
</mat-dialog-actions>
