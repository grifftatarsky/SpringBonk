<div class="dialog-shell" *ngIf="book">
  <div class="book-summary">
    <div class="cover">
      <app-book-cover [src]="coverUrl" [alt]="book.title"></app-book-cover>
    </div>
    <div class="info">
      <h3>{{ book.title }}</h3>
      <p class="author">{{ author }}</p>
      <p class="year" *ngIf="book.first_publish_year">
        First published {{ book.first_publish_year }}
      </p>
    </div>
  </div>

  <p-divider></p-divider>

  <div class="field" *ngIf="!loading; else loadingTpl">
    <label for="shelfSelect">Select a shelf</label>
    <p-dropdown
      id="shelfSelect"
      [options]="shelves"
      optionLabel="title"
      optionValue="id"
      [formControl]="shelfControl"
      placeholder="Choose a shelf"
      filter
      class="w-full"
    ></p-dropdown>
  </div>

  <div class="actions">
    <p-button
      type="button"
      label="Cancel"
      styleClass="p-button-text"
      (onClick)="cancel()"
    ></p-button>
    <p-button
      type="button"
      label="Add"
      icon="pi pi-check"
      (onClick)="confirm()"
      [disabled]="shelfControl.invalid || loading"
    ></p-button>
  </div>
</div>

<ng-template #loadingTpl>
  <div class="loading">
    <p-progressSpinner strokeWidth="4"></p-progressSpinner>
    <span>Loading shelvesâ€¦</span>
  </div>
</ng-template>
