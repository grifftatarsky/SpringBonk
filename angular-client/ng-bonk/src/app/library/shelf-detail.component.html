<mat-toolbar color="primary">
  <button mat-icon-button class="mobile-back-button" routerLink="/shelves">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <span>{{ (shelf$ | async)?.title }}</span>
  <span class="spacer"></span>
  <span *ngIf="(shelf$ | async)?.defaultShelf" class="default-badge"
    >Default</span
  >
</mat-toolbar>

<div class="shelf-content" (scroll)="onDetailScroll($event)">
  <div *ngIf="loading$ | async">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </div>
  <ng-container *ngIf="displayedBooks$ | async as books">
    <ng-container *ngIf="books.length > 0; else emptyBooks">
      <div class="book-cards">
        <mat-card
          class="book-card"
          *ngFor="let book of books"
          (click)="openBookSheet(book)">
          <div class="cover">
            <app-book-cover
              [src]="book.imageURL"
              [alt]="book.title + ' cover'"></app-book-cover>
          </div>
          <div class="meta">
            <div class="title">{{ book.title }}</div>
            <mat-chip-set>
              <mat-chip appearance="outlined">{{ book.author }}</mat-chip>
              <mat-chip appearance="outlined">{{
                book.publishedYear ?? 'â€”'
              }}</mat-chip>
            </mat-chip-set>
          </div>
          <div class="actions" (click)="$event.stopPropagation()">
            <button
              mat-icon-button
              aria-label="Book details"
              (click)="openBookSheet(book)">
              <mat-icon>info</mat-icon>
            </button>
          </div>
        </mat-card>
      </div>
    </ng-container>
  </ng-container>
  <ng-template #emptyBooks>
    <div class="no-data">This shelf has no books yet.</div>
  </ng-template>
</div>
