<mat-toolbar id="toolbar-shelves" class="gap-2">
  <button mat-icon-button (click)="refresh()" aria-label="Refresh shelves">
    <mat-icon>refresh</mat-icon>
  </button>
  <div class="toolbar-divider" aria-hidden="true">&nbsp;</div>
  <button mat-button (click)="openCreateDialog()" aria-label="Create shelf">
    <mat-icon>library_add</mat-icon>
    New Shelf
  </button>
  <div class="toolbar-divider" aria-hidden="true">&nbsp;</div>
  <button mat-button (click)="openBookSearchDialog()" aria-label="Add book">
    <mat-icon>menu_book</mat-icon>
    Add Book
  </button>
  <!--Divider, then TODO: chits for categories.-->
  <div class="spacer"></div>
</mat-toolbar>

<div *ngIf="loading$ | async">
  <mat-progress-bar mode="indeterminate" />
</div>

<div class="shelves-layout">
  <div class="list-pane" [class.mobile-hidden]="(hasSelection$ | async)">
    <div class="shelves-list" (scroll)="onListScroll($event)">
      <ng-container *ngIf="shelves$ | async as shelves; else emptyState">
        <mat-card
          class="shelf-card"
          *ngFor="let shelf of shelves"
          [routerLink]="[shelf.id]"
          tabindex="0">
          <div class="shelf-card-body">
            <div class="shelf-title">{{ shelf.title }}</div>
            <div class="shelf-tags">
              <span *ngIf="shelf.defaultShelf" class="tag">Default</span>
            </div>
          </div>
        </mat-card>
      </ng-container>
    </div>
  </div>
  <div class="detail-pane" [class.mobile-shown]="(hasSelection$ | async)">
    <router-outlet></router-outlet>
  </div>
</div>

<ng-template #emptyState>
  <div class="table-no-data-bar">No shelves yet. Create your first to get started.</div>
</ng-template>
