<h2 mat-dialog-title>Nominate this book</h2>

<mat-dialog-content>
  <div class="book-summary">
    <div class="cover">
      <app-book-cover [src]="coverUrl" [alt]="data.book.title + ' cover'"></app-book-cover>
    </div>
    <div class="meta">
      <div class="title">{{ data.book.title }}</div>
      <div class="author">{{ author }}</div>
      @if (data.book.first_publish_year) {
        <div class="year">First published {{ data.book.first_publish_year }}</div>
      }
    </div>
  </div>

  <div class="form-grid">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Add to shelf (optional)</mat-label>
      <mat-select
        [formControl]="shelfControl"
        [disabled]="loadingShelves">
        <mat-option [value]="null">Do not add to a shelf</mat-option>
        @for (shelf of shelves; track shelf.id) {
          <mat-option [value]="shelf.id">{{ shelf.title }}</mat-option>
        }
      </mat-select>
      <mat-hint>Select a shelf to keep track of the nomination.</mat-hint>
    </mat-form-field>
    @if (loadingShelves) {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }

    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Pitch (optional)</mat-label>
      <textarea
        matInput
        rows="4"
        [formControl]="pitchControl"
        placeholder="Why should this book be nominated?"></textarea>
      <mat-hint align="end">{{ pitchControl.value.length }}/1200</mat-hint>
    </mat-form-field>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()">Back</button>
  <button mat-raised-button color="primary" (click)="confirm()">Nominate</button>
</mat-dialog-actions>
