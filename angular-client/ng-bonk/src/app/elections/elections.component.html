<mat-toolbar id="toolbar-shelves" class="gap-2">
  <button mat-icon-button (click)="refresh()" aria-label="Refresh elections">
    <mat-icon>refresh</mat-icon>
  </button>
  <div class="toolbar-divider" aria-hidden="true">&nbsp;</div>
  <button mat-button (click)="openCreateDialog()" aria-label="Create election">
    <mat-icon>how_to_vote</mat-icon>
    Add Election
  </button>
  <div class="spacer"></div>
</mat-toolbar>

<div *ngIf="loading$ | async">
  <mat-progress-bar mode="indeterminate" />
  </div>

<div class="elections-layout">
  <div class="list-pane" #listContainer [class.mobile-hidden]="(hasSelection$ | async)" (scroll)="onListScroll($event)">
    <div class="elections-list">
      <ng-container *ngIf="elections$ | async as elections">
        <ng-container *ngIf="elections.length > 0; else noElections">
          <mat-card
            class="election-card"
            *ngFor="let e of elections"
            [class.active]="(selectedId$ | async) === e.id"
            tabindex="0"
            role="button">
            <div
              class="election-card-body"
              matRipple
              [matRippleColor]="'rgba(0,255,65,0.3)'"
              [matRippleCentered]="true"
              (click)="navigateToDetail(e.id)">
              <div class="election-title">{{ e.title }}</div>
              <div class="election-status" *ngIf="getStatus(e.endDateTime) as status">
                <mat-chip [ngClass]="status.class" disableRipple
                          [matTooltip]="status.text === 'Ongoing' ? ('Ends ' + (e.endDateTime | date: 'short')) : ''">
                  <mat-icon matChipAvatar inline>{{ status.icon }}</mat-icon>
                  {{ status.text }}
                </mat-chip>
              </div>
            </div>
          </mat-card>
        </ng-container>
      </ng-container>
      <ng-template #noElections>
        <ng-container *ngIf="!(loading$ | async)">
          <mat-card class="election-card">
            <div class="election-card-body">
              <div class="election-title">No elections</div>
            </div>
          </mat-card>
        </ng-container>
      </ng-template>
    </div>
  </div>
  <div class="detail-pane" [class.mobile-shown]="(hasSelection$ | async)">
    <router-outlet></router-outlet>
  </div>
</div>

<!-- Removed old emptyState template; empty handled above -->
