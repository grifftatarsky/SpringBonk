<p-toolbar class="elections-toolbar">
  <div class="p-toolbar-group-start">
    <button
      pButton
      type="button"
      icon="pi pi-refresh"
      class="p-button-text p-button-rounded"
      aria-label="Refresh elections"
      (click)="refresh()"
    ></button>
    <button
      pButton
      type="button"
      icon="pi pi-plus"
      label="Add Election"
      class="p-button-raised"
      (click)="openCreateDialog()"
    ></button>
  </div>
  <div class="p-toolbar-group-end">
    <p-tag [value]="total + ' total'" severity="info"></p-tag>
  </div>
</p-toolbar>

<div class="elections-layout">
  <section
    class="list-pane"
    #listContainer
    [class.mobile-hidden]="hasSelection$ | async"
    (scroll)="onListScroll($event)"
  >
    <ng-container *ngIf="elections$ | async as elections">
      <div class="card-list" *ngIf="elections.length; else emptyState">
        <p-card
          *ngFor="let election of elections"
          class="election-card"
          [ngClass]="{ active: (selectedId$ | async) === election.id }"
          (click)="navigateToDetail(election.id)"
        >
          <div class="card-body">
            <div class="title">{{ election.title }}</div>
            <p-tag
              [value]="statusFor(election).label"
              [severity]="statusFor(election).severity"
              pTooltip="{{ statusFor(election).tooltip || '' }}"
              tooltipPosition="left"
            ></p-tag>
          </div>
        </p-card>
      </div>
    </ng-container>
    <div class="list-loading" *ngIf="loading$ | async">
      <p-progressSpinner strokeWidth="3"></p-progressSpinner>
    </div>
  </section>

  <section class="detail-pane" [class.mobile-shown]="hasSelection$ | async">
    <router-outlet></router-outlet>
  </section>
</div>

<ng-template #emptyState>
  <div class="empty-state">
    No elections yet. Create one to get started.
  </div>
</ng-template>
